@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face {
  font-family: 'Geist';
  src: url('/fonts/GeistVF.woff2') format('woff2');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: '3270-Regular';
  src: url('/fonts/3270-Regular.otf') format('opentype');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Geist Mono';
  src: url('/fonts/GeistMonoVF.woff2') format('woff2');
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@layer base {
  :root {
    --background: 195 71% 14%; /* Solarized Dark base02 */
    --foreground: 200 13% 46%; /* Solarized Dark base00 */
    --primary: 203 79% 48%; /* Solarized Dark blue */
    --primary-foreground: 45 60% 90%; /* Solarized Dark base2 */
    --secondary: 195 100% 10%; /* Solarized Dark base03 */
    --secondary-foreground: 180 7% 60%; /* Solarized Dark base1 */
    --muted: 200 14% 40%; /* Solarized Dark base01 */
    --muted-foreground: 180 7% 60%; /* Solarized Dark base1 */
    --accent: 19 79% 45%; /* Solarized Dark orange */
    --accent-foreground: 45 60% 90%; /* Solarized Dark base2 */
    --additive: 69 100% 26%; /* Solarized Dark green */
    --additive-foreground: 0 0% 9%;
    --destructive: 1 71% 52%; /* Solarized Dark red */
    --destructive-foreground: 0 0% 98%;
    --border: 200 14% 40%; /* Solarized Dark base01 */
    --ring: 203 79% 48%; /* Solarized Dark blue */
  }
  .dark {
    --background: 195 100% 10%; /* Solarized Dark base03 */
    --foreground: 200 13% 46%; /* Solarized Dark base00 */
    --primary: 203 79% 48%; /* Solarized Dark blue */
    --primary-foreground: 45 60% 90%; /* Solarized Dark base2 */
    --secondary: 195 71% 14%; /* Solarized Dark base02 */
    --secondary-foreground: 180 7% 60%; /* Solarized Dark base1 */
    --muted: 200 14% 40%; /* Solarized Dark base01 */
    --muted-foreground: 180 7% 60%; /* Solarized Dark base1 */
    --accent: 19 79% 45%; /* Solarized Dark orange */
    --accent-foreground: 45 60% 90%; /* Solarized Dark base2 */
    --additive: 69 100% 26%;
    --additive-foreground: 0 0% 9%;
    --destructive: 1 71% 52%;
    --destructive-foreground: 0 0% 98%;
    --border: 200 14% 40%; /* Solarized Dark base01 */
    --ring: 203 79% 48%; /* Solarized Dark blue */
  }

  *,
  *::before,
  *::after {
    @apply border-border;
  }

  html {
    color-scheme: dark; /* Default to dark for Solarized Dark */
    @apply bg-background text-foreground;
    background: hsl(var(--background)); /* Solid Solarized Dark background */

    &.dark {
      color-scheme: dark;
      background: hsl(var(--background)); /* Solid Solarized Dark background for dark mode */
    }

    ::-webkit-scrollbar-corner {
      @apply bg-transparent;
    }
  }

  body {
    @apply win95-border;
    background-color: hsl(var(--background));
    padding: 8px;
  }

  .disable-transitions,
  .disable-transitions * {
    @apply !transition-none;
  }

  /* Windows 95 3D Border Effect */
  .win95-border {
    border-style: solid;
    border-width: 2px;
    border-color: hsl(var(--foreground)) hsl(var(--muted)) hsl(var(--muted)) hsl(var(--foreground));
  }

  .win95-border-inset {
    border-style: solid;
    border-width: 2px;
    border-color: hsl(var(--muted)) hsl(var(--foreground)) hsl(var(--foreground)) hsl(var(--muted));
  }

}

@layer components {
  article {
    @apply prose-headings:scroll-mt-20 prose-headings:break-words first:prose-headings:mt-0 prose-p:break-words prose-a:!break-words prose-a:!decoration-muted-foreground prose-a:underline-offset-[3px] prose-a:transition-colors hover:prose-a:!decoration-foreground prose-pre:!px-0 prose-img:mx-auto;

    .katex-display {
      @apply overflow-x-auto overflow-y-hidden py-4;
    }

    /* Removes background from <mark> elements */
    mark {
      @apply bg-transparent;
    }

    /* Removed Blanket syntax highlighting - Prism.js handles this */

    /* Inline code */
    :not(pre) > code {
      @apply relative bg-muted px-[0.2em] py-[0.1em] font-mono text-sm border-2 border-solid border-[hsl(var(--muted))] win95-border-inset;
      color: hsl(var(--foreground));
    }

    /* Code blocks - support both Prism.js and regular code blocks */
    pre,
    pre[class*="language-"] {
      @apply relative text-sm leading-normal p-4 win95-border-inset;
      font-family: 'JetBrainsMono Nerd Font Mono', 'monospace';
      background-color: hsl(var(--background));
      color: hsl(var(--foreground));
    }

    /* Code block content - let Prism.js handle colors */
    pre > code,
    pre[class*="language-"] > code {
      @apply whitespace-pre-wrap;
      background-color: transparent !important;
      color: inherit;
      font-family: inherit;
    }

    /* Ensure Prism.js token colors override our defaults */
    pre[class*="language-"] .token,
    pre .token {
      color: inherit;
    }

    /* Copy button for code blocks */
    .code-toolbar > .toolbar {
      @apply absolute top-1 right-1;
    }

    .code-toolbar > .toolbar button {
      @apply bg-secondary text-secondary-foreground px-2 py-1 text-xs win95-border active:win95-border-inset;
    }

    /* Remove previous figure[data-rehype-pretty-code-figure] styling as Prism.js pre will be targeted directly */
  }
}
